{% extends 'master.html' %}
{% load i18n l10n link_tags file_tags button_tags utils icon_tags form_tags anchor_menu_tags dropdown_tags %}

{% block sidebar_content %}
{% anchor_menu anchors desktop=True %}
{% endblock sidebar_content %}

{% block content %}
<h1 class="h1" id="title">
    {% trans "Persoonlijke gegevens" %}

    {% button_row align="right" %}
        {% dropdown icon="settings" secondary=True %}
            <div class="dropdown__item">
                {% button href="accounts:edit_profile" text=_("Bewerken") icon="edit" icon_outlined=True  transparent=True secondary=True %}
            </div>
            <div class="dropdown__item">
                {% button href="password_change" text=_("Wijzig wachtwoord") icon="key" icon_outlined=True  transparent=True secondary=True %}
            </div>
        {% enddropdown %}
        {% button href="accounts:profile_export" icon="file-pdf" text=_("Exporteer naar PDF") hide_text=True icon_outlined=True transparent=True secondary=True %}
    {% endbutton_row %}
</h1>

<table class="table table--vertical">
    <tr>
        <th class="table__header">
            {% icon icon="person_outline" %}<br>
            {{ request.user.get_full_name }}<br>
            {% if request.user.get_address %}{{ request.user.get_address }}{% else %}-{% endif %}
        </th>
        <td class="table__item">
            {% icon icon="calendar_today" %}<br>
            {% trans "Geboortedatum" %}:<br>
            {% if request.user.birthday %}{{ request.user.birthday|date:"d-m-Y" }}{% else %}-{% endif %}
        </td>
        <td class="table__item">
            {% icon icon="desktop_windows" %}<br>
            {% trans "Actief sinds" %}:<br>
            {{ request.user.date_joined|date:"d-m-Y" }}
        </td>
        <td class="table__item">
            {% icon icon="content_paste" %}<br>
            {% trans "Volgende actie" %}:<br>
            {{ next_action.end_date|date:"d-m-Y" }}
        </td>
    </tr>
</table>

<table class="table" id="overview">
    <tr>
        <th class="table__header">{% trans "Interessegebieden" %}</th>
        <td class="table__item">{{ theme_text }}</td>
        <td class="table__item table__item--right">{% link href="accounts:my_themes" text="Aanpassen" icon="arrow_forward" icon_position="after" primary=True %}</td>
    </tr>
    <tr>
        <th class="table__header">{% trans "Begeleider van de gemeente" %}</th>
        {% if mentor_contacts %}
            <td class="table__item">{{ mentor_contacts|join:", " }}</td>
            {% url 'accounts:contact_list' as mentor_url %}
            <td class="table__item table__item--right">{% link href=mentor_url|add:"?type=begeleider" text="Stuur een bericht" icon="arrow_forward" icon_position="after" primary=True %}</td>
        {% else %}
            <td class="table__item">{% trans "U heeft (nog) geen gemeentelijke begeleider." %}</td>
            <td class="table__item table__item--right"></td>
        {% endif %}
    </tr>
    <tr>
        <th class="table__header">{% trans "Mijn netwerkcontacten" %}</th>
        <td class="table__item">{{ contact_text }}</td>
        <td class="table__item table__item--right">{% link href="accounts:contact_list" text=_("Beheer contacten") icon="arrow_forward" icon_position="after" primary=True %}</td>
    </tr>
    {% if questionnaire_exists %}
        <tr>
            <th class="table__header">{% trans "Zelfdiagnose" %}</th>
            <td class="table__item"></td>
            <td class="table__item table__item--right">{% link href='questionnaire:questionnaire_list' text=_('Start zelfdiagnose') icon="arrow_forward" icon_position="after" primary=True %}</td>
        </tr>
    {% endif %}
    <tr>
        <th class="table__header">{% trans "Acties" %}</th>
        <td class="table__item">{{ action_text }}</td>
        <td class="table__item table__item--right">{% link href="accounts:action_list" text="Aanpassen" icon="arrow_forward" icon_position="after" primary=True %}</td>
    </tr>
    <tr>
        <th class="table__header">{% trans "Afspraken" %}</th>
        <td class="table__item">4 afspraken, eerstvolgende voor 6 september</td>
        <td class="table__item table__item--right">{% link href="#" text="Aanpassen" icon="arrow_forward" icon_position="after" primary=True %}</td>
    </tr>
</table>

{% render_form form=form method="POST" id="deactivate-form" extra_classes="confirm" data_confirm_title=_("Weet je het zeker dat je je account wilt deactiveren?") data_confirm_cancel=_("Nee") data_confirm_default=_("Ja") %}
    {% csrf_token %}
    {% form_actions primary_text=_("Profiel deactiveren") primary_icon="close" transparent=True %}
{% endrender_form %}

{% file_list h1=True files=files allow_delete=True title=_("Bestanden") download_view="accounts:documents_download" %}

{% button_row align="right" %}
    {% button href="accounts:documents_create" text=_("Bestand toevoegen") primary=True %}
{% endbutton_row %}
{% endblock content %}
