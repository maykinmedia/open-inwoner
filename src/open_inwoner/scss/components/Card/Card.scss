.card {
  --card-color-background: white;
  --card-color-border: var(--color-gray);
  --card-size-border: var(--border-width-thin);
  --card-size-dog-ear: var(--gutter-width);
  --card-spacing: var(--spacing-large);

  background-color: var(--card-color-background);
  border: var(--card-size-border) solid var(--card-color-border);
  border-radius: var(--border-radius);
  box-sizing: border-box;
  display: flex;
  flex-direction: column;
  position: relative;
  text-decoration: none;

  &--inline {
    display: inline-flex;
  }

  &--stretch {
    height: 100%;
  }

  &--type-info {
    --card-color-background: var(--color-info-lighter);
    --card-color-border: transparent;
    --card-spacing: var(--spacing-extra-large);
    clip-path: polygon(
      0% 0%,
      calc(100% - var(--card-size-dog-ear)) 0%,
      100% var(--card-size-dog-ear),
      100% 100%,
      0% 100%
    );
    max-width: 320px;
  }

  &--type-info:after {
    background-color: var(--color-info);
    border-radius: var(--border-radius);
    //box-shadow: -2px 2px 1px 1px rgba(0, 0, 0, 0.1);
    content: '';
    height: var(--card-size-dog-ear);
    position: absolute;
    right: calc(-1 * var(--card-size-border));
    top: calc(-1 * var(--card-size-border));
    width: var(--card-size-dog-ear);
  }

  &--type-info .h1,
  &--type-info .h2,
  &--type-info .h3,
  &--type-info .h4,
  &--type-info .h5,
  &--type-info .h5,
  &--type-info .p {
    color: var(--color-info-darker);
  }

  &--tinted {
    --card-color-background: var(--color-gray-lightest);
  }

  &__img {
    height: 100px;
    object-fit: cover;
    width: 100%;
  }

  &__img--contain {
    object-fit: contain;
  }
  &__body {
    padding: 0;
    // give space for padding of children to make entire content clickable
    height: 100%;

    p.h3 {
      height: calc(100% - 2 * (var(--card-spacing)));
      // make entire content clickable, without changing template too much
    }

    a:link.card--description {
      display: block;
      color: var(--font-color-body);
      text-decoration: none;
      height: calc(100% - var(--row-height) - var(--card-spacing));
      // pushes the forward-arrow down to the bottom,
      // so button needs to be positioned Absolute, since the height will increase if a product-title covers multiple lines

      p {
        margin: var(--spacing-small) 0 calc(3 * var(--spacing-large)) 0;
      }
    }

    .h2 a.link {
      width: 100%;
      // make entire content clickable, without changing template too much
    }

    .h3 a.link {
      display: flex;
      flex-wrap: wrap;
      align-content: start;
      padding: var(--card-spacing);
      height: 100%;
      width: calc(100% - var(--gutter-width));
    }
  }

  &__body--grid {
    display: grid;
    grid-template-columns: 1fr 2fr;
    padding: 0;
    height: 100%;

    .card__content {
      padding: var(--card-spacing);

      a:link.card--description {
        display: block;
        color: var(--font-color-body);
        text-decoration: none;
        height: calc(100% - var(--row-height) - var(--card-spacing));
        // this part will push the forward-arrow down to the bottom,
        // but button needs to be positioned Absolute, since the height will increase if a product-title wil cover multiple lines
      }

      .p,
      .button {
        margin-top: 4px;
      }
    }
  }

  &__body--direction-horizontal {
    display: flex;
    justify-content: space-between;
  }

  &__image {
    height: 100%;
    width: 100%;
    object-fit: cover;
  }

  &__tabled {
    display: grid;
    grid-template-columns: auto 1fr;
    gap: 0px 16px;
    color: var(--font-color-body);
    font-family: var(--font-family-body);
    font-size: var(--font-size-body);
    line-height: var(--font-line-height-body);
    margin-top: var(--spacing-extra-large);
  }

  .h4 {
    margin: 0 0 var(--card-spacing);
  }

  &--compact .h4 {
    padding: 0 0 var(--card-spacing);
    position: relative;

    &:before {
      bottom: 0;
      content: '';
      border-bottom: var(--card-size-border) solid var(--card-color-border);
      width: calc(100% + 2 * var(--card-spacing));
      position: absolute;
      left: calc(-1 * var(--card-spacing));
    }
  }

  &--product {
    padding: 20px;
    align-items: end;

    .h3 {
      width: 100%;
    }

    .p {
      width: 100%;
    }
  }

  ///
  /// Exceptions.
  ///

  /// Cards within cards should leave some space.
  .card + .card {
    margin-top: calc(0.5 * var(--gutter-width));
  }

  /// Form should not have padding within a card.
  .form {
    padding: 0;
  }

  /// Arrow button on product cards.
  a.button:last-child {
    //float: right; remove float IF designer agrees all arrows should always be at the bottom
    position: absolute;
    bottom: var(--card-spacing);
    right: calc(var(--spacing-large));
  }

  .link + .link {
    margin-left: 0;
    white-space: nowrap;

    @media (min-width: 768px) {
      white-space: normal;
    }
  }

  /// On a stretched card, the one and only link after a list should be placed on above the bottom border.
  &--stretch &__body {
    padding-bottom: 0;
  }

  &--stretch &__body .list:last-of-type {
    padding-bottom: calc(var(--font-size-body) + var(--card-spacing) + 1em);
  }

  &--stretch .list + .link:first-of-type:last-of-type {
    bottom: var(--card-spacing);
    position: absolute;
  }
}

///
/// Contextual.
///

.h2 + .card {
  margin-top: var(--spacing-large);
}
